{% extends 'base_user.html' %}
{% block content %}

<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

<!-- Hero Section -->
<section class="bg-gradient-to-br from-indigo-600 to-indigo-700 text-white py-20 relative overflow-hidden">
  <div class="absolute top-0 left-0 w-40 h-40 bg-white bg-opacity-10 rounded-full animate-pulse"></div>
  <div class="max-w-6xl mx-auto px-4 text-center relative z-10">
    <h1 class="text-5xl md:text-6xl font-extrabold mb-4 tracking-tight leading-tight">
      Welcome to <span class="text-yellow-300">BookLabNow</span>
    </h1>
    <p class="text-lg md:text-2xl mb-6">Reliable diagnostics. Modern labs. Easy online booking.</p>
    <div class="flex justify-center mb-6">
      <lottie-player 
        src="https://assets10.lottiefiles.com/packages/lf20_0fhlytwe.json"  
        background="transparent"  
        speed="1"  
        style="width: 280px; height: 280px;"  
        loop  
        autoplay>
      </lottie-player>
    </div>
    <a href="{% url 'add_appointment' %}" class="bg-yellow-300 text-indigo-800 font-semibold px-6 py-3 rounded-full hover:bg-yellow-400 transition shadow-md">
      Book an Appointment
    </a>
  </div>
</section>

<!-- Recommended Tests -->
<section class="py-20 bg-gray-50">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12">Recommended Tests</h2>
    <div id="recommended-tests" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Cards dynamically inserted here -->
    </div>
  </div>
</section>

<!-- About Section -->
<section class="py-20 bg-gray-50">
  <div class="max-w-5xl mx-auto px-4 text-center">
    <h2 class="text-3xl font-bold mb-4">About BookLabNow</h2>
    <p class="text-gray-600 leading-relaxed max-w-3xl mx-auto text-lg">
      BookLabNow is your digital health partner, offering seamless online appointment booking, real-time diagnostics, and patient-focused service. We're committed to bringing speed, reliability, and comfort to your diagnostic journey.
    </p>
  </div>
</section>

<!-- Services Preview -->
<section class="py-20 bg-white">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12">Our Popular Services</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="bg-white rounded-lg shadow-lg p-8 text-center hover:shadow-xl transition">
        <i class="fas fa-vial text-indigo-600 text-5xl mb-4"></i>
        <h3 class="font-semibold text-xl mb-2">Blood Test</h3>
        <p class="text-gray-600">Quick and reliable blood diagnostics with certified professionals.</p>
      </div>
      <div class="bg-white rounded-lg shadow-lg p-8 text-center hover:shadow-xl transition">
        <i class="fas fa-x-ray text-indigo-600 text-5xl mb-4"></i>
        <h3 class="font-semibold text-xl mb-2">X-Ray</h3>
        <p class="text-gray-600">Advanced digital X-rays with instant results and expert interpretation.</p>
      </div>
      <div class="bg-white rounded-lg shadow-lg p-8 text-center hover:shadow-xl transition">
        <i class="fas fa-microscope text-indigo-600 text-5xl mb-4"></i>
        <h3 class="font-semibold text-xl mb-2">Pathology</h3>
        <p class="text-gray-600">Comprehensive and accurate pathology services for all diagnostic needs.</p>
      </div>
    </div>
  </div>
</section>

<!-- Stats Counter Section -->
<section class="bg-indigo-100 py-20">
  <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 text-center">
    <div>
      <h3 class="text-4xl font-bold text-indigo-700">10K+</h3>
      <p class="text-gray-700">Appointments Booked</p>
    </div>
    <div>
      <h3 class="text-4xl font-bold text-indigo-700">50+</h3>
      <p class="text-gray-700">Certified Specialists</p>
    </div>
    <div>
      <h3 class="text-4xl font-bold text-indigo-700">20+</h3>
      <p class="text-gray-700">Diagnostics Services</p>
    </div>
    <div>
      <h3 class="text-4xl font-bold text-indigo-700">5+</h3>
      <p class="text-gray-700">Lab Locations</p>
    </div>
  </div>
</section>

<!-- Call to Action -->
<section class="bg-indigo-600 py-20 text-white text-center">
  <div class="max-w-4xl mx-auto px-4">
    <h2 class="text-3xl font-bold mb-4">Ready to get tested?</h2>
    <p class="mb-6">Booking your appointment takes just a minute and ensures priority service.</p>
    <a href="{% url 'add_appointment' %}" class="bg-white text-indigo-700 px-8 py-3 rounded-full font-semibold shadow-md hover:bg-gray-200 transition">
      Book Now
    </a>
  </div>
</section>

<!-- FAQ Preview -->
<section class="py-20 bg-gray-50">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12">Frequently Asked Questions</h2>
    <div class="grid md:grid-cols-2 gap-6">
      <div class="bg-white p-6 rounded shadow">
        <h4 class="font-semibold mb-2">How do I book an appointment?</h4>
        <p class="text-sm text-gray-700">Click on "Book Appointment", fill the required fields, and you're done!</p>
      </div>
      <div class="bg-white p-6 rounded shadow">
        <h4 class="font-semibold mb-2">Do I need a referral?</h4>
        <p class="text-sm text-gray-700">No referral needed. You can book any service directly from the platform.</p>
      </div>
    </div>
    <div class="text-center mt-8">
      <a href="{% url 'faq_page' %}" class="text-indigo-600 font-semibold hover:underline">View all FAQs</a>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const container = document.getElementById("recommended-tests");
    try {
      const res = await fetch("/api/services/");
      const services = await res.json();

      services.slice(0, 4).forEach(service => {
        const card = document.createElement("div");
        card.className = "bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition duration-300 ease-in-out text-center flex flex-col justify-between";

        card.innerHTML = `
          <h3 class="text-xl font-semibold text-indigo-700 mb-3 break-words">${service.name}</h3>
          <p class="text-sm text-gray-700 mb-5 min-h-[60px]">${service.description || 'No description available.'}</p>
          <p class="text-lg font-bold text-green-600 mb-6">Rs. ${service.price}</p>
          <a href="{% url 'add_user_appointment' %}?service=${service.id}" class="text-indigo-600 hover:underline font-semibold inline-block mt-auto">Book Now â†’</a>
        `;
        container.appendChild(card);
      });
    } catch (error) {
      container.innerHTML = '<p class="text-red-500 text-center">Failed to load services. Please try again later.</p>';
    }
  });
</script>

{% endblock %}
